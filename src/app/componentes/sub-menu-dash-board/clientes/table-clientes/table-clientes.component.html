<app-delete-modal
  [isActive]="deleteModalActive"
  [clientId]="selectedClientId"
  (onClose)="closeModal('delete')"
  (onError)="showError($event)"
  (onSuccess)="showSuccess($event)"
/>

<app-add-modal
  [isActive]="addModalActive"
  (onError)="showError($event)"
  (onClose)="closeModal('add')"
  (onSuccess)="showSuccess($event)"
/>

<table class="table table-striped table-sm text-center">
  <thead>
    <tr>
      @for (header of headers; track $index) {
      <th scope="col">
        {{ header }}
      </th>
      }
      <th>
        <button class="btn btn-primary add-button" (click)="openModal('add')">
          <i class="fas fa-plus"></i>
        </button>
      </th>
    </tr>
  </thead>
  <tbody>
    @for (cliente of clientes; track cliente.idCliente) {
    <tr id="client{{ cliente }}">
      <td>
        {{ cliente.idCliente }}
      </td>
      <td>
        {{ cliente.nombreCliente }}
      </td>
      <td>
        {{ cliente.numeroIdentidad }}
      </td>
      <td>
        {{ cliente.ubicacion }}
      </td>
      <td>
        @if (cliente.estado) {
        <i class="fas fa-check-circle text-success"></i>
        } @else {
        <i class="fas fa-times-circle text-danger"></i>
        }
      </td>
      <td>
        {{ cliente.fechaNacimiento | date : "dd/MM/yyyy" }}
      </td>
      <td>
        <div>
          <button class="btn btn-primary px-2 py-1 mx-2">
            <i class="fas fa-edit"></i>
          </button>

          <button
            class="btn btn-danger px-2 py-1 mx-2"
            (click)="openModal('delete', cliente.idCliente!)"
          >
            <i class="fas fa-trash-alt"></i>
          </button>
        </div>
      </td>
    </tr>
    }
  </tbody>
</table>
<app-pagination
  [currentPage]="currentPage"
  [totalPages]="lastPage"
  (handlePagination)="changePage($event)"
/>

@if (error !== "") {
<div class="alert alert-danger mx-5 mt-2 error" role="alert">
  <i class="bi bi-exclamation-triangle-fill mx-1"></i>
  {{ error }}
</div>
} @if (success !== "") {
<div class="alert alert-success mx-5 mt-2 success" role="alert">
  <i class="bi bi-check-circle-fill mx-1"></i>
  {{ success }}
</div>
}
